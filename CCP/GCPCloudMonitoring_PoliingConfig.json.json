[
    {
        "name": "GCPMonitorCCPPoller",
        "apiVersion": "2023-02-01-preview",
        "type": "Microsoft.OperationalInsights/workspaces/providers/dataConnectors",
        "location": "{{location}}",
        "kind": "GCP",
        "properties": {
            "connectorDefinitionName": "GCPMonitorCCPDefinition",
            "dataType": "GCPMonitorlogs_CL",
            "dcrConfig": {
                "streamName": "Custom-GCPMonitor",
                "dataCollectionEndpoint": "{{dataCollectionEndpoint}}",
                "dataCollectionRuleImmutableId": "{{dataCollectionRuleImmutableId}}"
            },
            "auth": {
                "serviceAccountEmail": "[[parameters('GCPServiceAccountEmail')]",
                "projectNumber": "[[parameters('GCPProjectNumber')]",
                "workloadIdentityProviderId": "[[parameters('GCPWorkloadIdentityProviderId')]"
            },
            "request": {
                "projectId": "[[parameters('GCPProjectId')]",
                "subscriptionNames": [
                    "[[parameters('GCPSubscriptionName')]"
                ]
            }
        }
    }
]